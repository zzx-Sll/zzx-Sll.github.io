<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="敲代码是件快乐的事情">
<meta property="og:type" content="website">
<meta property="og:title" content="zzx的个人博客">
<meta property="og:url" content="http://example.com/page/4/index.html">
<meta property="og:site_name" content="zzx的个人博客">
<meta property="og:description" content="敲代码是件快乐的事情">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="zzx">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>zzx的个人博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">zzx的个人博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/04/%E6%B8%85%E9%99%A4%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AF%AF%E5%B7%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/04/%E6%B8%85%E9%99%A4%E5%AE%9A%E6%97%B6%E5%99%A8%E8%AF%AF%E5%B7%AE/" class="post-title-link" itemprop="url">清除定时器误差</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-11-04 17:31:10 / 修改时间：17:39:20" itemprop="dateCreated datePublished" datetime="2021-11-04T17:31:10+08:00">2021-11-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="清除定时器误差"><a href="#清除定时器误差" class="headerlink" title="清除定时器误差"></a>清除定时器误差</h3><ul>
<li><p>问题：由于定时器是异步宏任务，所以并不是真的隔了设置的时间间隔就触发，而是会等待所有同步任务执行完后才会执行。故存在一定的误差</p>
</li>
<li><p>解决方法：</p>
<ul>
<li><p>向服务器轮询查询误差。但是每秒都轮询会造成性能损耗。如果访问量过大会造成服务器压力</p>
</li>
<li><p>前端手动解决。代码：</p>
<ul>
<li><pre><code class="javascript">             /* 前端根据时间差来自动调整间隔时间的方式来清除定时器误差
              1 设置变量记录倒计时次数
              2 记录起始的时间
              3 记录定时器开始调用的时间
              4 设置interval变量为1000ms
              5 利用定时器开始的时间减去起始时间*倒计时次数即得到倒计时误差
              6 设置下一次执行定时器的间隔时间为 interval-上一次定时器误差*/
             //  初始化时间间隔
             let Interval = 1000;
             /* 记录执行次数的变量 */
             let count = 0;
             /* 开始倒计时的时间 */
             let startTime = new Date().getTime()
             // 计时器名称
             let timer;
             /* 距离服务器活动开始的时间 */
             let ms = 5000;
             /* 误差 */
             let offset;
             if (ms &gt; 0) &#123;
               timer = setTimeout(clearOffset, Interval)
             &#125;
             function clearOffset() &#123;
               count++;
               offset = new Date().getTime() - (startTime + count * Interval)
               console.log(&#39;当前时间&#39;, new Date().getTime());
               console.log(&#39;起始时间&#39;, startTime);
               let nextInterval = Interval - offset
               if (nextInterval &lt; 0) &#123;
                 nextInterval = 0
               &#125;
               ms -= Interval
               console.log(`&#39;执行次数$&#123;count&#125;&#39;,误差$&#123;offset&#125;,下一次执行间隔时间$&#123;nextInterval&#125;,倒计时还剩$&#123;ms&#125;`);
               // 判断，倒计时时间是否到达，如果到达则清除定时器
               if (ms &lt; 0) &#123;
                 clearTimeout(timer)
               &#125; else &#123;
                 timer = setTimeout(clearOffset, nextInterval)
               &#125;

             &#125;            </code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/03/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%B8%A6%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96url%E8%B7%AF%E5%BE%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/11/03/%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%B8%A6%E5%87%BD%E6%95%B0%E8%8E%B7%E5%8F%96url%E8%B7%AF%E5%BE%84%E6%9F%A5%E8%AF%A2%E5%8F%82%E6%95%B0/" class="post-title-link" itemprop="url">浏览器自带函数获取url路径查询参数</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-11-03 17:00:41" itemprop="dateCreated datePublished" datetime="2021-11-03T17:00:41+08:00">2021-11-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-04 17:38:57" itemprop="dateModified" datetime="2021-11-04T17:38:57+08:00">2021-11-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="函数方法获取url路径的查询参数"><a href="#函数方法获取url路径的查询参数" class="headerlink" title="函数方法获取url路径的查询参数"></a>函数方法获取url路径的查询参数</h3><ul>
<li>话不多说，直接上代码<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">        <span class="comment">/* </span></span><br><span class="line"><span class="comment">使用浏览器提供的查询函数 URLSearchParams</span></span><br><span class="line"><span class="comment">1 使用该构造函数new 一个路径查询参数对象，将url做为该函数测参数</span></span><br><span class="line"><span class="comment">2 用第一步得到的对象调用其原型链上的entries()方法 返回包含路径参数的键值对数组</span></span><br><span class="line"><span class="comment">3 用Object.fromEntries(上一步得到的数组)返回一个对象，此对象中就包含了路径查询参数</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;search&#x27;</span>, <span class="built_in">window</span>.location.search);</span><br><span class="line"><span class="keyword">let</span> Params = <span class="keyword">new</span> URLSearchParams(<span class="built_in">window</span>.location.search)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;🚀 ~ file: 51.获取浏览器查询参数.html ~ line 24 ~ Params&#x27;</span>, Params)</span><br><span class="line">Params = <span class="built_in">Object</span>.fromEntries(Params.entries())</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;🚀 ~ file: 51.获取浏览器查询参数.html ~ line 26 ~ Params&#x27;</span>, Params)</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/28/%E7%9B%92%E5%AD%90%E5%AE%BD%E5%BA%A6%E8%87%AA%E9%80%82%E5%BA%94%E3%80%81%E5%AE%BD%E9%AB%98%E7%AD%89%E6%AF%94%E7%BC%A9%E6%94%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/28/%E7%9B%92%E5%AD%90%E5%AE%BD%E5%BA%A6%E8%87%AA%E9%80%82%E5%BA%94%E3%80%81%E5%AE%BD%E9%AB%98%E7%AD%89%E6%AF%94%E7%BC%A9%E6%94%BE/" class="post-title-link" itemprop="url">盒子宽度自适应、宽高等比缩放</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-28 16:37:56 / 修改时间：16:40:12" itemprop="dateCreated datePublished" datetime="2021-10-28T16:37:56+08:00">2021-10-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="几种css方法使盒子宽度自适应，宽高等比缩放"><a href="#几种css方法使盒子宽度自适应，宽高等比缩放" class="headerlink" title="几种css方法使盒子宽度自适应，宽高等比缩放"></a>几种css方法使盒子宽度自适应，宽高等比缩放</h3><ul>
<li><pre><code class="css">      *,
  div &#123;
    margin: 0;
    padding: 8px;
  &#125;

  /* 方法1:盒子宽度百分比 高度vh */
  /* #app &#123;
    margin: 0 auto;
    width: 30%;
    height: 30vh;
    background-color: pink;
  &#125; */

  /* 方法2 盒子高度0 宽度百分比 利用 padding值相对于父盒子 设置padding百分比 */
  /* #app &#123;
    padding-bottom: 30%;
    margin: 0 auto;
    width: 30%;
    height: 0;

    background-color: pink;

  &#125;
  */
  /* 方法3 盒子宽度百分比 伪元素content为空，然后垂直方向padding值100% 相当于宽度的百分比 */
  #app &#123;
    margin: 0 auto;
    width: 30%;

  &#125;

  #app::after &#123;

    display: block;
    /* margin-top: ; */
    width: 100%;

    content: &#39;&#39;;
    padding-top: 100%;
    background-color: pink;
  &#125;</code></pre>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/26/jquery%E6%8E%A5%E6%94%B6%E5%90%8E%E7%AB%AF%E8%BF%94%E5%9B%9E%E7%9A%84%E6%96%87%E4%BB%B6%E6%B5%81%E5%B9%B6%E4%B8%8B%E8%BD%BD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/26/jquery%E6%8E%A5%E6%94%B6%E5%90%8E%E7%AB%AF%E8%BF%94%E5%9B%9E%E7%9A%84%E6%96%87%E4%BB%B6%E6%B5%81%E5%B9%B6%E4%B8%8B%E8%BD%BD/" class="post-title-link" itemprop="url">jquery接收后端返回的文件流并下载</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-26 10:04:11 / 修改时间：10:11:59" itemprop="dateCreated datePublished" datetime="2021-10-26T10:04:11+08:00">2021-10-26</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="工作中遇到了一个问题，前端提交数据，后端返回文件流表格。前端进行接收并且下载"><a href="#工作中遇到了一个问题，前端提交数据，后端返回文件流表格。前端进行接收并且下载" class="headerlink" title="工作中遇到了一个问题，前端提交数据，后端返回文件流表格。前端进行接收并且下载"></a>工作中遇到了一个问题，前端提交数据，后端返回文件流表格。前端进行接收并且下载</h3><ul>
<li><p>问题：由于用到了get请求，并且需要携带大量参数(吐槽一句,这样的请求方法属实有点毛病，但是不得不使用)。我在这里使用的是jquery。后端返回文件流不能直接接收下载，会导致乱码问题，故需要声明接收的数据类型为blob</p>
</li>
<li><p>坑，在网上搜到一大堆答案都是说jquery不能直接声明接收的数据类型为blob，需要使用原生的XMLHttpRequest方法。但是原生的ajax不能携带参数到body(参数有点多所以需要放body里面)。然后有搜到答案说jquery直接在xhrFiled里面指定返回的数据类型为blob即可。但是试了半天发现报错。最后才发现项目使用的jquery版本为2.1不支持直接指定接收数据类型。然后又将版本升级到3.1才解决问题。话不多说了，直接上代码</p>
<ul>
<li><pre><code class="javascript">    // 发送请求
    const url = `$&#123;this.basePath&#125;GetDownStEqBsExcel`;
    $.ajax(&#123;
      url: url,
      type: &#39;GET&#39;,
      data: &#123;
        data: JSON.stringify(newTable),
      &#125;,
      // dataType: &quot;json&quot;,
      traditional: true, //这里设置为true,否则传递数组数组失败
      xhrFields: &#123;
        responseType: &#39;blob&#39;, //声明返回数据类型
      &#125;,

      // 重写xhr
      // xhr: function () &#123;
      //   var xhr = new XMLHttpRequest();
      //   xhr.responseType = &#39;blob&#39;;
      //   return xhr;
      // &#125;,
      success: (res) =&gt; &#123;
        this.downLoadXls(res, `测站设备导入模板.xls`);
      &#125;,
      error: (error) =&gt; &#123;
        console.log(&#39;error&#39;, error);
      &#125;,
    &#125;);

    //解析文件下载表格的方法
     // 解析blob文件，并进行下载
  downLoadXls(data, filename) &#123;
    // var blob = new Blob([data], &#123; type: &#39;application/vnd.ms-excel;charset=utf-8&#39; &#125;); //接收的是blob，若接收的是文件流，需要转化一下

    if (typeof window.chrome !== &#39;undefined&#39;) &#123;
      // Chrome version
      var link = document.createElement(&#39;a&#39;);
      link.href = window.URL.createObjectURL(data);
      link.download = filename;
      link.click();
    &#125; else if (typeof window.navigator.msSaveBlob !== &#39;undefined&#39;) &#123;
      // IE version

      var blob = new Blob([data], &#123; type: &#39;application/force-download&#39; &#125;);
      window.navigator.msSaveBlob(blob, filename);
    &#125; else &#123;
      // Firefox version
      var file = new File([data], filename, &#123;
        type: &#39;application/force-download&#39;,
      &#125;);
      window.open(URL.createObjectURL(file));
    &#125;
  &#125;,</code></pre>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/" class="post-title-link" itemprop="url">性能优化之重排与重绘</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-22 15:39:40 / 修改时间：16:57:57" itemprop="dateCreated datePublished" datetime="2021-10-22T15:39:40+08:00">2021-10-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="性能优化"><a href="#性能优化" class="headerlink" title="性能优化"></a>性能优化</h3><ul>
<li><p>浏览器的渲染机制：</p>
<ol>
<li>解析html解构生成Dom树</li>
<li>解析css生成CSSOM</li>
<li>Dom和cssom合成renderTree</li>
<li>Layout阶段，计算出每个节点在文档上的具体位置</li>
<li>Painting：将Layout后的节点内容呈现到屏幕上</li>
</ol>
</li>
<li><p>重排(Reflow)与重绘(Repaint)</p>
<ul>
<li>重排与重绘是无法避免的。重排是指元素的大小位置发生了变化，需要重新计算其在节点中的位置，引起整个文档都需要重新渲染。而重绘是值某个元素的背景色颜色边框颜色等等不影响其在文档上的位置时，只会引起文档的部分渲染。</li>
<li>重排与重绘都需要消耗性能，而重排需要消耗极大的性能。</li>
<li>重排一定会引起重绘，重绘不一定引起重排</li>
</ul>
</li>
<li><p>当我们知道重排与重绘需要消耗很大性能时，我们应当考虑怎样操作来减少对性能的消耗</p>
<ul>
<li><p>我们应当尽量减少对DOM元素的操作。在vue中尽量以数据去驱动视图改变。而尽量避免直接操作DOM元素来改变视图</p>
</li>
<li><p>经常切换位置的元素可以使通过position：absoulte;来使元素脱离文档流这样修改元素时不会引起自身的重排/重绘，从而提升性能。</p>
</li>
<li><p>插入元素的操作放在操作css后。</p>
</li>
<li><p>当需要对DOM元素进行操作时，应进行批量操作，这样只会进行一次重排重绘。进而减少了很多性能消耗</p>
<ul>
<li><p>当我们只是对某个元素进行一些操作时，如果改变宽高、位置时。不要直接通过js去操作。而是可以通过js操作元素添加一个类名。这个类名改变这个元素的样式如宽高、位置。</p>
</li>
<li><p>当我们需要对多个元素进行某些同样的样式进行修改的话。我们可以通过自定义一些方法。先将这些元素从文档中移除，然后添加类名改变样式。最后再将这些元素添加进文档中。以下是一个例子：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">// 定义删除和插入函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">RemoveAndInsert</span>(<span class="params">element</span>) </span>&#123;</span><br><span class="line"><span class="keyword">const</span> parentNode = element.parentNode</span><br><span class="line"><span class="keyword">const</span> nextSibling = element.nextSibling</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;🚀 ~ file: 45.性能优化之相同样式修改多个元素样式.html ~ line 25 ~ RemoveAndInsert ~ nextSibling&#x27;</span>, nextSibling)</span><br><span class="line"><span class="comment">// 移除该元素</span></span><br><span class="line">parentNode.removeChild(element)</span><br><span class="line"><span class="comment">// 返回插入该元素的闭包回调函数</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 判断插入元素的位置</span></span><br><span class="line">  <span class="keyword">if</span> (!nextSibling) parentNode.appendChild(element)</span><br><span class="line">  <span class="keyword">else</span> parentNode.insertBefore(element, nextSibling)</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> ul = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.ul_all&#x27;</span>);</span><br><span class="line"><span class="comment">// console.log(&#x27;🚀 ~ file: 45.性能优化之相同样式修改多个元素样式.html ~ line 29 ~ ul&#x27;, ul)</span></span><br><span class="line"></span><br><span class="line"> <span class="comment">//</span></span><br><span class="line"> <span class="comment">// function </span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">addClassTo</span>(<span class="params">element, className</span>) </span>&#123;</span><br><span class="line"> <span class="keyword">let</span> lists = element.getElementsByTagName(<span class="string">&#x27;li&#x27;</span>)</span><br><span class="line"> <span class="comment">// 移除element</span></span><br><span class="line"> <span class="keyword">let</span> InsertCallback = RemoveAndInsert(ul)</span><br><span class="line"> <span class="comment">// 将HTMLCollection元素集合转换为数组结构</span></span><br><span class="line"> lists = <span class="built_in">Array</span>.from(lists)</span><br><span class="line"> <span class="comment">// console.log(&#x27;🚀 ~ file: 45.性能优化之相同样式修改多个元素样式.html ~ line 68 ~ addClassTo ~ lists&#x27;, lists)</span></span><br><span class="line"> <span class="comment">// 变量元素数组,添加类名</span></span><br><span class="line"> lists.forEach(<span class="function"><span class="params">li</span> =&gt;</span> &#123;</span><br><span class="line">  li.classList.add(className)</span><br><span class="line"> &#125;)</span><br><span class="line">  <span class="comment">// 添加完毕，将元素插入回文档中</span></span><br><span class="line">   InsertCallback()</span><br><span class="line">  &#125;</span><br><span class="line">  addClassTo(ul, <span class="string">&#x27;lis&#x27;</span>)</span><br><span class="line"> <span class="comment">// nodeList 和 HTMLCollection 的区别</span></span><br><span class="line"> <span class="comment">// nodeList返回的元素集合是静态的。 HTMLCollection返回的元素集合是动态。</span></span><br><span class="line"> <span class="comment">// querySelectAll返回NodeList。 getElementsByClassName 返回HTMLCollection</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>通过上面的代码我们将原效果图如下：<img src="/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/pic01.jpg"> <img src="/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/pic02.jpg"> <img src="/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/pic03.jpg"> 通过将ul元素移除然后进行操作最后添加进文档中实现效果如下： <img src="/2021/10/22/%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B9%8B%E9%87%8D%E6%8E%92%E4%B8%8E%E9%87%8D%E7%BB%98/pic04.jpg"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/20/%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E7%9A%84%E7%AE%80%E5%8D%95%E5%8E%BB%E9%87%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/20/%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E7%9A%84%E7%AE%80%E5%8D%95%E5%8E%BB%E9%87%8D/" class="post-title-link" itemprop="url">对象数组的简单去重</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-20 17:51:24" itemprop="dateCreated datePublished" datetime="2021-10-20T17:51:24+08:00">2021-10-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-22 15:55:58" itemprop="dateModified" datetime="2021-10-22T15:55:58+08:00">2021-10-22</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="数组对象根据属性的简单去重"><a href="#数组对象根据属性的简单去重" class="headerlink" title="数组对象根据属性的简单去重"></a>数组对象根据属性的简单去重</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">1 合并数组得到新数组</span></span><br><span class="line"><span class="comment">2 新数组filter(item,index)=&gt;&#123;新数组findIndex方法遍历 return </span></span><br><span class="line"><span class="comment"> 新数组.findIndex(citem=&gt;&#123;</span></span><br><span class="line"><span class="comment">  根据属性、值来进行判断相等过滤</span></span><br><span class="line"><span class="comment"> &#125;)===index&#125; </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> a = [&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;ls&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;];</span><br><span class="line"><span class="keyword">let</span> b = [&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;zs&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;, &#123; <span class="attr">id</span>: <span class="number">4</span>, <span class="attr">name</span>: <span class="string">&#x27;ww&#x27;</span>, <span class="attr">age</span>: <span class="number">28</span> &#125;];</span><br><span class="line"></span><br><span class="line">a = a.concat(b)</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="comment">// filter + findIndex 去重</span></span><br><span class="line">a = a.filter(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> a.findIndex(<span class="function">(<span class="params">citem</span>) =&gt;</span> citem.id === item.id &amp;&amp; citem.name === item.name &amp;&amp; citem.age === item.age) === index</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line"><span class="comment">// reduce+findIndex方法去重</span></span><br><span class="line"><span class="keyword">let</span> arr = a.reduce(<span class="function">(<span class="params">arr, cur, index, a</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (a.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> item.id === cur.id &amp;&amp; item.name === cur.name) === index) &#123; arr.push(cur) &#125;</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;, [])</span><br><span class="line"><span class="built_in">console</span>.log(arr);</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/09/elementui%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8A%98%E5%8F%A0%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/09/elementui%E8%8F%9C%E5%8D%95%E6%A0%8F%E6%8A%98%E5%8F%A0%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">elementui菜单栏折叠问题</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-09 18:10:04" itemprop="dateCreated datePublished" datetime="2021-10-09T18:10:04+08:00">2021-10-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-28 17:57:44" itemprop="dateModified" datetime="2021-10-28T17:57:44+08:00">2021-10-28</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="elementui菜单栏折叠问题"><a href="#elementui菜单栏折叠问题" class="headerlink" title="elementui菜单栏折叠问题"></a>elementui菜单栏折叠问题</h4><ul>
<li><p>问题描述：当菜单栏使用动态折叠后,鼠标移入会提示栈溢出问题</p>
</li>
<li><p>原因：网上查阅可能是由于递归子菜单，而submenu默认append-to-body，冒泡时会导致进入死循环</p>
</li>
<li><p>解决方法：</p>
<ul>
<li><p>可以直接设置submenu属性popper-append-to-body为false。但是我使用后鼠标移入不会弹出子菜单，故采用了第二种方法</p>
</li>
<li><p>在递归的submenu外面套一个div，然后会出现文字和右箭头无法隐藏。第二步设置css隐藏文字和右箭头</p>
</li>
<li><p>代码如下：</p>
<ul>
<li><pre><code class="html">  &lt;template&gt;
          &lt;!-- 最外层套div解决折叠菜单后鼠标移入导致栈溢出问题 --&gt;
         &lt;div&gt;
          &lt;BasicMenuItem v-if=&quot;!menuHasChildren(menuItem)&quot; :menuItem=&quot;menuItem&quot; /&gt;
           &lt;el-submenu v-else :key=&quot;menuItem.path&quot; :index=&quot;menuItem.path&quot;&gt;
               &lt;template #title&gt;
         &lt;BasicMenuItemContent :menuItem=&quot;menuItem&quot; /&gt;
             &lt;/template&gt;
              &lt;template&gt;
         &lt;BasicSubMenuItem
           v-for=&quot;childrenItem in menuItem.children&quot;
           :menuItem=&quot;childrenItem&quot;
           :key=&quot;childrenItem.path&quot;
         /&gt;
          &lt;/template&gt;
          &lt;/el-submenu&gt;
          &lt;/div&gt;
         &lt;/template&gt;

           &lt;script&gt;
           import &#123; isArray &#125; from &quot;@/components/utils/is&quot;;

           import BasicMenuItem from &quot;./BasicMenuItem.vue&quot;;
           import BasicMenuItemContent from &quot;./BasicMenuItemContent.vue&quot;;

           export default &#123;
           name: &quot;BasicSubMenuItem&quot;,
           components: &#123; BasicMenuItem, BasicMenuItemContent &#125;,
           props: &#123;
             menuItem: Object
           &#125;,
           methods: &#123;
             menuHasChildren(menuItem) &#123;
               return isArray(menuItem.children) &amp;&amp; menuItem.children.length &gt; 0;
             &#125;
           &#125;
           &#125;;
           &lt;/script&gt;

           &lt;style scoped lang=&quot;less&quot;&gt;&lt;/style&gt;

</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>                 /**
               解决折叠菜单后递归处理submenu，鼠标移入导致栈溢出的问题：在 递归的submenu外面套一层 div然后写入下面样式，对文字，右箭头进行隐藏处理
                **/
               // /deep/.el-menu--collapse &gt; div &gt; .el-submenu &gt; .el-submenu__title span &#123;
               //   height: 0;
               //   width: 0;
               //   overflow: hidden;
               //   visibility: hidden;
               //   display: inline-block;
               // &#125;
               .el-menu--collapse &#123;
                 &amp; .el-submenu__title,
                 &amp; .el-menu-item &#123;
                   &amp; span &#123;
                     // height: 0;
                     // width: 0;
                     // overflow: hidden;
                     // visibility: hidden;
                     // display: inline-block;
                     display: none;
                   &#125;

                   &amp; .el-submenu__icon-arrow &#123;
                     display: none;
                   &#125;
                 &#125;
               &#125;
               // .el-menu--collapse
               //   &gt; div
               //   &gt; .el-submenu
               //   &gt; .el-submenu__title
              //   .el-submenu__icon-arrow &#123;
              //   display: none;
              // &#125;
                   &#125;
   ```</code></pre>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/09/%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/09/%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">点击事件执行机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-10-09 17:46:21 / 修改时间：17:47:16" itemprop="dateCreated datePublished" datetime="2021-10-09T17:46:21+08:00">2021-10-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">    /* div &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 30px;</span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125; */</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.grandFather</span> &#123;</span></span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      width: 200px;</span><br><span class="line">      height: 200px;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 2<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#333</span>;</span></span><br><span class="line">      background-color: pink;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.father</span> &#123;</span></span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 100px;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#333</span>;</span></span><br><span class="line">      /* background-color: transparent;</span><br><span class="line">       */</span><br><span class="line">      background-color: yellow;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-class">.son</span> &#123;</span></span><br><span class="line">      box-sizing: border-box;</span><br><span class="line">      width: 50px;</span><br><span class="line">      height: 50px;</span><br><span class="line"><span class="css">      <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#333</span>;</span></span><br><span class="line">      /* background-color: transparent;</span><br><span class="line">       */</span><br><span class="line">      background-color: green;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* li &#123;</span><br><span class="line">      width: 100px;</span><br><span class="line">      height: 30px;</span><br><span class="line">      background-color: green;</span><br><span class="line">    &#125; */</span><br><span class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;grandFather&quot;</span>&gt;</span></span><br><span class="line">    grandfa</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;father&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>father<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;son&quot;</span>&gt;</span></span><br><span class="line">        son<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- &lt;ul&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">      &lt;li&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="comment">    &lt;/ul&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> son = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.son&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> father = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.father&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> grandFather = <span class="built_in">document</span>.querySelector(<span class="string">&#x27;.grandFather&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="comment">// son.onclick = function () &#123;</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//   console.log(&#x27;son-冒泡&#x27;);</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// &#125;</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;son-冒泡&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">  son.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;son-捕获&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">true</span>)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="javascript">  father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;father-捕获&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">true</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  father.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;father-冒泡&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">  <span class="comment">// father.onclick = function () &#123;</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//   console.log(&#x27;father-冒泡&#x27;);</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// &#125;</span></span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"><span class="javascript">  grandFather.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;grandFather-冒泡&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">false</span>)</span></span><br><span class="line"><span class="javascript">  grandFather.addEventListener(<span class="string">&#x27;click&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&#x27;grandFather-捕获&#x27;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;, <span class="literal">true</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="javascript">  <span class="comment">// 绑定在被点击元素的事件是按照代码顺序发生，其他元素通过冒泡或者捕获“感知”的事件，按照W3C的标准，先发生捕获事件，后发生冒泡事件。所有事件的顺序是：其他元素捕获阶段事件 -&gt; 本元素代码顺序事件 -&gt; 其他元素冒泡阶段事件 。注：谷歌浏览器最新版有更改，目标元素执行顺序为先执行捕获事件再执行冒泡事件</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/10/TypeSrcipt-%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/10/TypeSrcipt-%E9%AB%98%E7%BA%A7%E7%B1%BB%E5%9E%8B/" class="post-title-link" itemprop="url">TypeSrcipt-高级类型</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-10 17:28:08" itemprop="dateCreated datePublished" datetime="2021-09-10T17:28:08+08:00">2021-09-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-13 10:05:57" itemprop="dateModified" datetime="2021-09-13T10:05:57+08:00">2021-09-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="ts中的高级类型"><a href="#ts中的高级类型" class="headerlink" title="ts中的高级类型"></a>ts中的高级类型</h3><p><strong>是什么？</strong></p>
<ul>
<li>ts中除了string、number、boolean基础类型外，还声明了一些高级类型可以灵活运用在一些特定场景。帮助我们应对复杂的开发场景</li>
</ul>
<p><strong>有哪些？</strong></p>
<ul>
<li><p>ts中的高级类型主要有一下几种类型</p>
<ul>
<li>交叉类型</li>
<li>联合类型</li>
<li>类型别名</li>
<li>类型索引</li>
<li>类型约束</li>
<li>映射类型</li>
<li>条件类型</li>
</ul>
</li>
<li><p>交叉类型</p>
<ul>
<li><p>用 &amp; 来定义，表示并的意思。将多个类型合并为一个类型</p>
</li>
<li><p>语法: T &amp; U,适用对象合并场景。</p>
</li>
<li><pre><code class="javascript">  function extend&lt;T,U&gt;(obj1:T,obj2:U):T &amp; U&#123;
    let extendObj=&#123;&#125;
    for(let k in obj1)&#123;
      extendObj[k]=obj1[k]
    &#125;

    for(let j in obj2)&#123;
      if(!extendObj.hasOwnProperty(j))&#123;
        extendObj[j]=obj2[j]
      &#125;
    &#125;

    return extendObj
  &#125;

  &lt;!-- interface IObj&lt;T&gt;&#123;

</code></pre>
</li>
</ul>
</li>
</ul>
<pre><code>  &#125; --&gt;

  extend()
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- 联合类型</span><br><span class="line">  - 联合类型类似于或，表示几个类型中的一个，本质上是交的关系</span><br><span class="line">  - 语法：T|U</span><br><span class="line">  - &#96;&#96;&#96;javascript</span><br><span class="line">     type obj&#x3D;string|number;</span><br><span class="line">     let a:obj&#x3D;&#39;123&#39;</span><br><span class="line">     let b:obj&#x3D;123</span><br><span class="line">     let c:obj&#x3D;false &#x2F;&#x2F;error</span><br></pre></td></tr></table></figure></code></pre>
<ul>
<li><p>类型别名</p>
<ul>
<li>类型别名会给类型起个新名字，有点类似接口。但是可以作用于原始值,元组以及任何手写的类型。</li>
<li>语法 type typename=someValidType</li>
<li>```javascript<br>type variable=string | number<br> let a:variable=’123’<br> let b:variable=123<br> let c:variable=false //error<br> 此外：类型别名可以是泛型，可以是联合类型。交叉类型<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- 类型索引</span><br><span class="line">  - 类型索引类似于Object.keys 用于获取一个接口中的所有key的联合类型。</span><br><span class="line">  - 语法 keyof interface</span><br><span class="line">  - &#96;&#96;&#96;javascript</span><br><span class="line">     interface IPerson&#123;</span><br><span class="line">       name:string</span><br><span class="line">       age:number</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     type keys&#x3D;keyof Iperson</span><br><span class="line">     &#x2F;&#x2F;等价于</span><br><span class="line">     type keys&#x3D; &#39;name&#39; | &#39;age&#39;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>类型约束</p>
<ul>
<li><p>通过关键字 <span style="color:red;font-weight:700;">extends</span> 来对类型进行约束，不同于类中使用extends的继承，泛型中使用extends的主要作用是对类型进行约束</p>
</li>
<li><p>```javascript<br>  type BaseType=string | number | boolean</p>
<p>  function returnSelf<T extends basetype>(arg:T):T{</T></p>
<pre><code>return arg</code></pre>
<p>  }<br>  //表示 该函数参数只能是 string number boolean中的一种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- 映射类型</span><br><span class="line">  - 利用关键词 in 来遍历已有接口的key或是联合类型。</span><br><span class="line">  - &#96;&#96;&#96;javascript</span><br><span class="line">         interface IPerson&#123;</span><br><span class="line">          name:string</span><br><span class="line">          age:number</span><br><span class="line">          status:false</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      type Readonly&lt;T&gt;&#x3D;&#123;</span><br><span class="line">       readonly [p in keyof T]:T[p]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      let readonlyObj&#x3D;Readonly&lt;IPerson&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>条件类型</p>
<ul>
<li>条件类型的语法和三元表达式的语法规则一样，满足某种条件则输出对应的类型。经常用于一些类型不确定的情况</li>
<li><pre><code class="javascript">   T extends U ? X:Y</code></pre>
</li>
<li>上面的意思是T是否是U的子集，是则输出X类型，否则输出Y类型</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/03/Vue%E4%B8%AD%E7%9A%84nextTick/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
      <meta itemprop="name" content="zzx">
      <meta itemprop="description" content="敲代码是件快乐的事情">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zzx的个人博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/03/Vue%E4%B8%AD%E7%9A%84nextTick/" class="post-title-link" itemprop="url">Vue中的nextTick</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-03 10:38:06" itemprop="dateCreated datePublished" datetime="2021-09-03T10:38:06+08:00">2021-09-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-09-15 18:25:05" itemprop="dateModified" datetime="2021-09-15T18:25:05+08:00">2021-09-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">前端</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Vue中的-nextTick"><a href="#Vue中的-nextTick" class="headerlink" title="Vue中的$nextTick"></a>Vue中的$nextTick</h4><ul>
<li>在vue中我们经常会遇到一个问题，当有时我们设置了数据值时，DOM视图数据并没有立马更新。又或者当我们给数据赋值后里面去查看数据，发现数据并没有更新。</li>
<li>vue官网给出的解释：<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">可能你还没有注意到，Vue 在更新 DOM 时是异步执行的。只要侦听到数据变化，Vue 将开启一个队列，并缓冲在同一事件循环中发生的所有数据变更。如果同一个 watcher 被多次触发，只会被推入到队列中一次。这种在缓冲时去除重复数据对于避免不必要的计算和 DOM 操作是非常重要的。然后，在下一个的事件循环“tick”中，Vue 刷新队列并执行实际 (已去重的) 工作。Vue 在内部对异步队列尝试使用原生的 Promise.then、MutationObserver 和 setImmediate，如果执行环境不支持，则会采用 setTimeout(fn, 0) 代替。</span><br><span class="line"></span><br><span class="line">    也就是说我们在设置this.msg = &#x27;some thing&#x27;的时候，Vue并没有马上去更新DOM数据，而是将这个操作放进一个队列中；如果我们重复执行的话，队列还会进行去重操作；等待同一事件循环中的所有数据变化完成之后，会将队列中的事件拿出来处理。</span><br><span class="line"></span><br><span class="line">  这样做主要是为了提升性能，因为如果在主线程中更新DOM，循环100次就要更新100次DOM；但是如果等事件循环完成之后更新DOM，只需要更新1次。</span><br><span class="line"></span><br><span class="line">     为了在数据更新操作之后操作DOM，我们可以在数据变化之后立即使用Vue.nextTick(callback)；这样回调函数会  在DOM更新完成后被调用，就可以拿到最新的DOM元素了。</span><br></pre></td></tr></table></figure></li>
<li>知道问题的原因了，只需我们调用this.$nextTick(()=&gt;{})，在函数回调中就可以拿到更新的数据了。</li>
<li>那么vue中的$nextTick的执行原理呢？<br>1、 将所有的nextTick()中的回调函数push进callbacks数组，定义pending状态，控制每次只执行一个函数<br>2、内部做了一些判断浏览器环境来进行promise.then/MutationObservers/setImmediate/setTimeout降级操作来将这些任务放入微任务/宏任务队列等待执行<br>3、 等待同步任务执行完后，执行微任务/宏任务中的callbacks中的回调</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zzx"
      src="/images/%E7%8B%97%E5%AD%90%E5%A4%B4%E5%83%8F1.jpg">
  <p class="site-author-name" itemprop="name">zzx</p>
  <div class="site-description" itemprop="description">敲代码是件快乐的事情</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">45</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/zzx-Sll" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;zzx-Sll" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zzx</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
